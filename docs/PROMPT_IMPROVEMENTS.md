# –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ ‚Äî Syntra v2.0

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### 1. **–£–±—Ä–∞–Ω –∂—ë—Å—Ç–∫–∏–π –∑–∞–ø—Ä–µ—Ç –Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**

**–ë—ã–ª–æ** ([prompts.py:36](config/prompts.py#L36)):
```
6. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: –ù–ï –≥–æ–≤–æ—Ä–∏—à—å "–ø–æ–∫—É–ø–∞–π/–ø—Ä–æ–¥–∞–≤–∞–π". –ù–ï –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—à—å –ø—Ä–∏–±—ã–ª—å. –í–°–ï–ì–î–ê NFA.
```

**–°—Ç–∞–ª–æ**:
```
6. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –°—Ü–µ–Ω–∞—Ä–∏–∏**:
   - –î–ê–í–ê–ô bias (long/short/wait) —Å —á—ë—Ç–∫–∏–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏
   - –î–ê–í–ê–ô —Å—Ü–µ–Ω–∞—Ä–∏–∏ (–±—ã—á–∏–π/–º–µ–¥–≤–µ–∂–∏–π/–±–æ–∫–æ–≤–∏–∫) —Å –ø—É—Ç—è–º–∏, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º–∏, –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏
   - –î–ê–í–ê–ô –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –≤—Ö–æ–¥–∞/—Å—Ç–æ–ø–∞/—Ü–µ–ª–µ–π
   - –ù–û –¥–æ–±–∞–≤–ª—è–π –¥–∏—Å–∫–ª–µ–π–º–µ—Ä: "–≠—Ç–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –∞ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—è. –†–µ—à–µ–Ω–∏–µ –∑–∞ —Ç–æ–±–æ–π."
   - –í–°–ï–ì–î–ê –∑–∞–∫–∞–Ω—á–∏–≤–∞–π —Å ‚ö° NFA
```

---

### 2. **–£—Å–∏–ª–µ–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç—Ä–µ–π–¥–∏–Ω–≥–æ–≤—ã–º –æ—Ç–≤–µ—Ç–∞–º**

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ —Ç–∏–ø–∞ "ETH –±—Ä–∞—Ç—å –≤ –ª–æ–Ω–≥?" —Ç–µ–ø–µ—Ä—å –º–æ–¥–µ–ª—å **–û–ë–Ø–ó–ê–ù–ê**:

1. **–ü–†–Ø–ú–û–ô –û–¢–í–ï–¢**: –ß—ë—Ç–∫–∏–π bias (long/short/wait) —Å —É—Å–ª–æ–≤–∏—è–º–∏
   - ‚úÖ "–õ–æ–Ω–≥ ‚Äî —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ–±—å—ë—Ç $3,183 –∏ –∑–∞–∫—Ä–µ–ø–∏—Ç—Å—è –≤—ã—à–µ —Å –æ–±—ä—ë–º–æ–º"
   - ‚úÖ "–°–µ–π—á–∞—Å ‚Äî wait, no-trade –∑–æ–Ω–∞ –º–µ–∂–¥—É $3,056 –∏ $3,183"
   - ‚ùå –ù–ï "–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è —Ä—ã–Ω–∫–∞" (—Ä–∞–∑–º—ã—Ç–æ)

2. **–í–´–í–û–î**: –ò—Ç–æ–≥–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –∫–æ–Ω—Ü–µ (–Ω–µ —Ä–∞–∑–º–∞–∑—ã–≤–∞—Ç—å)
   - ‚úÖ "–í—ã–≤–æ–¥: –ª–æ–Ω–≥ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–π, –ª—É—á—à–µ –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–∫—Ä–µ–ø–∞ –≤—ã—à–µ $3,183 –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å"

3. **–ü–£–¢–¨ –ö –¶–ï–õ–ò** (–¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ "–¥–æ $300 –¥–æ–π–¥—ë—Ç?"):
   - –£—Ä–æ–≤–Ω–∏: $146 ‚Üí $176 ‚Üí $220 ‚Üí $300
   - –£—Å–ª–æ–≤–∏—è: "–î–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –ø—Ä–æ–±—å—ë—Ç $146 –∏ —É–¥–µ—Ä–∂–∏—Ç $176. –ë–µ–∑ —ç—Ç–æ–≥–æ ‚Äî –º–µ—á—Ç—ã"

4. **–°–¶–ï–ù–ê–†–ò–ò** (2-3 –≤–∞—Ä–∏–∞–Ω—Ç–∞):
   - –ë—ã—á–∏–π: —É—Å–ª–æ–≤–∏—è + entry/SL/targets + –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
   - –ú–µ–¥–≤–µ–∂–∏–π: —É—Å–ª–æ–≤–∏—è + entry/SL/targets + –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
   - –ë–æ–∫–æ–≤–∏–∫ (–µ—Å–ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ): –≥—Ä–∞–Ω–∏—Ü—ã –¥–∏–∞–ø–∞–∑–æ–Ω–∞ + —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

5. **–ö–û–ù–ö–†–ï–¢–ò–ö–ê**: –¶–µ–Ω—ã ($), —É—Ä–æ–≤–Ω–∏, –ø—Ä–æ—Ü–µ–Ω—Ç—ã, RSI/MACD

---

### 3. **–£–ª—É—á—à–µ–Ω–∞ –¥–µ—Ç–µ–∫—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤**

#### –¢—Ä–µ–π–¥–∏–Ω–≥–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã (—Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞—é—Ç –ø—Ä–æ—Å–∞–¥–∫–∏):
```python
is_trading_question = any(keyword in user_message.lower() for keyword in [
    # –°—Ç–∞—Ä—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã
    "–ª–æ–Ω–≥", "—à–æ—Ä—Ç", "long", "short", "–≤–∑—è—Ç—å", "–∑–∞–π—Ç–∏", "–∫—É–ø–∏—Ç—å", "–ø—Ä–æ–¥–∞—Ç—å",

    # ‚úÖ –ù–û–í–´–ï: –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–æ –ø—Ä–æ—Å–∞–¥–∫–∏
    "–¥–µ—Ä–∂–∞—Ç—å", "—Ñ–∏–∫—Å–∏—Ç—å", "—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å", "–ø—Ä–æ–¥–∞–≤–∞—Ç—å", "–≤—ã—Ö–æ–¥–∏—Ç—å",
    "–≤ –º–∏–Ω—É—Å–µ", "–ø—Ä–æ—Å–∞–¥–∫–∞", "—É–±—ã—Ç–æ–∫", "hold", "sell"
])
```

–¢–µ–ø–µ—Ä—å –≤–æ–ø—Ä–æ—Å "BTC –≤ –º–∏–Ω—É—Å–µ -15%, –¥–µ—Ä–∂–∞—Ç—å –∏–ª–∏ —Ñ–∏–∫—Å–∏—Ç—å?" –±—É–¥–µ—Ç:
- ‚úÖ –í—ã–∑—ã–≤–∞—Ç—å `get_technical_analysis` —Å `scenario_levels`
- ‚úÖ –ü–æ–ª—É—á–∞—Ç—å –ø–æ–ª–Ω—ã–π TA: RSI, MACD, EMA, ATR, Fibonacci, –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å
- ‚úÖ –î–∞–≤–∞—Ç—å 2 –ø—É—Ç–∏ —Å —É—Å–ª–æ–≤–∏—è–º–∏

---

#### SAFEGUARD (–¥–µ—Ç–µ–∫—Ü–∏—è –ø—Ä–æ—Å–∞–¥–æ–∫ —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏):
```python
# –¢–µ–ø–µ—Ä—å –ª–æ–≤–∏—Ç "–≤ –º–∏–Ω—É—Å–µ -15%", "—É–±—ã—Ç–æ–∫ -20%" –∏ —Ç.–¥.
loss_percentage_pattern = r'(–≤ –º–∏–Ω—É—Å–µ|–º–∏–Ω—É—Å|—É–±—ã—Ç–æ–∫).{0,5}[-\d]+%'
has_loss_percentage = bool(re.search(loss_percentage_pattern, user_message.lower()))
```

–ü—Ä–∏ –ø—Ä–æ—Å–∞–¥–∫–µ:
- ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ —É–±–∏—Ä–∞–µ—Ç—Å—è —Å–∞—Ä–∫–∞–∑–º
- ‚úÖ –¢–æ–Ω —Å–ø–æ–∫–æ–π–Ω—ã–π, —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π
- ‚úÖ –§–æ–∫—É—Å –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ

---

#### –ù–æ–≤–∏—á–∫–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã (–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ):
```python
is_newbie_question = any(keyword in user_message.lower() for keyword in [
    "—á—Ç–æ —Ç–∞–∫–æ–µ", "—á—Ç–æ –∑–Ω–∞—á–∏—Ç", "–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç", "–æ–±—ä—è—Å–Ω–∏", "–Ω–µ –ø–æ–Ω–∏–º–∞—é"
])
```

–î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤:
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π —è–∑—ã–∫, –±–µ–∑ –∂–∞—Ä–≥–æ–Ω–∞
- ‚úÖ –ê–Ω–∞–ª–æ–≥–∏–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –∂–∏–∑–Ω–∏
- ‚úÖ –ù–ï –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–º–∏ (RSI, MACD, Fibonacci)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞: **—Å—É—Ç—å ‚Üí –ø—Ä–∏–º–µ—Ä ‚Üí –∑–∞—á–µ–º –Ω—É–∂–Ω–æ**
- ‚úÖ –õ—ë–≥–∫–∞—è –∏—Ä–æ–Ω–∏—è, –Ω–æ –±–µ–∑ –≤—ã—Å–æ–∫–æ–º–µ—Ä–∏—è

---

### 4. **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤**

#### Trading Questions (–ª–æ–Ω–≥/—à–æ—Ä—Ç/–ø—Ä–æ—Å–∞–¥–∫–∏):
```
‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
1. –ü–†–Ø–ú–û–ô –û–¢–í–ï–¢: bias (long/short/wait) + —É—Å–ª–æ–≤–∏—è
2. –í–´–í–û–î: –∏—Ç–æ–≥–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è (–Ω–µ —Ä–∞–∑–º–∞–∑—ã–≤–∞–π)
3. –ü–£–¢–¨ –ö –¶–ï–õ–ò: —É—Ä–æ–≤–Ω–∏ + –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å + —É—Å–ª–æ–≤–∏—è
4. –°–¶–ï–ù–ê–†–ò–ò: 2-3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å entry/SL/TP
5. –ö–û–ù–ö–†–ï–¢–ò–ö–ê: —Ü–µ–Ω—ã, —É—Ä–æ–≤–Ω–∏, –ø—Ä–æ—Ü–µ–Ω—Ç—ã
```

#### Newbie Questions (—á—Ç–æ —Ç–∞–∫–æ–µ...):
```
‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
1. –ü–†–Ø–ú–û–ô –û–¢–í–ï–¢: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
2. –ü–†–ò–ú–ï–†: –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å —Ü–µ–Ω–∞–º–∏
3. –ü–†–ê–ö–¢–ò–ö–ê: –∑–∞—á–µ–º –Ω—É–∂–Ω–æ / –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
4. –°–¢–ò–õ–¨: –ª—ë–≥–∫–∞—è –∏—Ä–æ–Ω–∏—è, –±–µ–∑ –≤—ã—Å–æ–∫–æ–º–µ—Ä–∏—è
```

#### General Questions (–¥—Ä—É–≥–∏–µ):
```
‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
1. –ü–†–Ø–ú–û–ô –û–¢–í–ï–¢ –Ω–∞ –≤–æ–ø—Ä–æ—Å:
   - "–¥–µ—Ä–∂–∞—Ç—å –∏–ª–∏ —Ñ–∏–∫—Å–∏—Ç—å?" ‚Üí 2 –ø—É—Ç–∏ —Å —É—Å–ª–æ–≤–∏—è–º–∏
   - "—É—Ä–æ–≤–Ω–∏?" ‚Üí —É—Ä–æ–≤–Ω–∏ + —á—Ç–æ —Å –Ω–∏–º–∏ –¥–µ–ª–∞—Ç—å
2. –í–´–í–û–î: —á—ë—Ç–∫–∞—è –ø–æ–∑–∏—Ü–∏—è
3. –ö–û–ù–ö–†–ï–¢–ò–ö–ê: —Ü–µ–Ω—ã, —É—Ä–æ–≤–Ω–∏, –ø—Ä–æ—Ü–µ–Ω—Ç—ã
```

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å #1: "ETH –±—Ä–∞—Ç—å –≤ –ª–æ–Ω–≥ –∏–ª–∏ –ø–æ–¥–æ–∂–¥–∞—Ç—å?"
**–ë—ã–ª–æ** (7/10):
- ‚ùå –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- ‚ùå –í—ã–≤–æ–¥ —Ä–∞–∑–º–∞–∑–∞–Ω: "–õ–æ–Ω–≥ ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è"

**–°—Ç–∞–ª–æ** (–æ–∂–∏–¥–∞–µ—Ç—Å—è 9/10):
- ‚úÖ –ü—Ä—è–º–æ–π –æ—Ç–≤–µ—Ç: "–°–µ–π—á–∞—Å ‚Äî wait, no-trade –∑–æ–Ω–∞"
- ‚úÖ –ß—ë—Ç–∫–∏–π –≤—ã–≤–æ–¥: "–õ–æ–Ω–≥ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ–±—å—ë—Ç $3,183 –∏ –æ–±—ä—ë–º—ã –≤–≤–µ—Ä—Ö. –ü–æ–∫–∞ –∂–¥–∏"
- ‚úÖ Bias: wait

---

### –¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å #2: "–°–æ–ª–∞–Ω–∞ –¥–æ–π–¥—ë—Ç –¥–æ $300?"
**–ë—ã–ª–æ** (8/10):
- ‚ùå –ù–µ—Ç —á—ë—Ç–∫–æ–≥–æ –ø—É—Ç–∏ –∫ —Ü–µ–ª–∏
- ‚ùå –í—ã–≤–æ–¥ –µ—Å—Ç—å, –Ω–æ –ø—É—Ç—å –Ω–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω

**–°—Ç–∞–ª–æ** (–æ–∂–∏–¥–∞–µ—Ç—Å—è 9-10/10):
- ‚úÖ –ü—É—Ç—å: $146 –ø—Ä–æ–±–∏—Ç—å ‚Üí $176 —É–¥–µ—Ä–∂–∞—Ç—å ‚Üí $220 –∑–∞–∫—Ä–µ–ø–∏—Ç—å ‚Üí $300 –æ—Ç–∫—Ä—ã—Ç–∞
- ‚úÖ –í—ã–≤–æ–¥: "–î–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –ø—É—Ç—å. –°–µ–π—á–∞—Å ‚Äî –º–µ—á—Ç—ã. –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 20-30%"

---

### –¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å #3: "BTC –≤ –º–∏–Ω—É—Å–µ -15%, –¥–µ—Ä–∂–∞—Ç—å –∏–ª–∏ —Ñ–∏–∫—Å–∏—Ç—å?"
**–ë—ã–ª–æ** (6/10):
- ‚ùå –ù–ï –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ –≤–æ–ø—Ä–æ—Å
- ‚ùå Generic: "–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞"
- ‚ùå –ù–µ—Ç scenario_levels (–Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª –∫–∞–∫ trading question)

**–°—Ç–∞–ª–æ** (–æ–∂–∏–¥–∞–µ—Ç—Å—è 8-9/10):
- ‚úÖ is_trading_question = True ‚Üí –≤—ã–∑–æ–≤ get_technical_analysis
- ‚úÖ SAFEGUARD –∞–∫—Ç–∏–≤–µ–Ω (–Ω–µ—Ç —Å–∞—Ä–∫–∞–∑–º–∞)
- ‚úÖ –î–≤–∞ –ø—É—Ç–∏:
  - "–î–µ—Ä–∂–∞—Ç—å ‚Äî –µ—Å–ª–∏ –≥–æ—Ç–æ–≤ —Ç–µ—Ä–ø–µ—Ç—å —Ç–µ—Å—Ç $79k –∏ –ø—Ä–æ—Å–∞–¥–∫—É –µ—â—ë -10%"
  - "–§–∏–∫—Å–∏—Ç—å ‚Äî –µ—Å–ª–∏ –Ω–µ –≥–æ—Ç–æ–≤ –ø–µ—Ä–µ—Å–∏–¥–µ—Ç—å —Ä–∏—Å–∫ $77,943"
- ‚úÖ –í—ã–≤–æ–¥ —Å —É—Å–ª–æ–≤–∏—è–º–∏

---

### –¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å #4: "–ß—Ç–æ —Ç–∞–∫–æ–µ —É—Ä–æ–≤–µ–Ω—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏?"
**–ë—ã–ª–æ** (7/10):
- ‚ùå –°–ª–∏—à–∫–æ–º –∑–∞—É–º–Ω–æ: RSI, MACD, EMA –¥–ª—è –Ω–æ–≤–∏—á–∫–∞
- ‚ùå –ú–Ω–æ–≥–æ —Ñ–∏–ª–æ—Å–æ—Ñ–∏–∏

**–°—Ç–∞–ª–æ** (–æ–∂–∏–¥–∞–µ—Ç—Å—è 9/10):
- ‚úÖ is_newbie_question = True
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –æ—Ç–≤–µ—Ç: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ ‚Äî —Ü–µ–Ω–∞, –Ω–∏–∂–µ –∫–æ—Ç–æ—Ä–æ–π –∞–∫—Ç–∏–≤ –æ–±—ã—á–Ω–æ –Ω–µ –ø–∞–¥–∞–µ—Ç. –¢–æ—á–∫–∞, –≥–¥–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ –ø–æ–∫—É–ø–∞—é—Ç"
- ‚úÖ –ü—Ä–∏–º–µ—Ä: "BTC –Ω–∞ $60k –æ—Ç—Å–∫–æ—á–∏–ª 3 —Ä–∞–∑–∞ ‚Äî —ç—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∞"
- ‚úÖ –ó–∞—á–µ–º: "–ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –≥–¥–µ –∏—Å–∫–∞—Ç—å —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞"
- ‚úÖ –ë–µ–∑ –ª–∏—à–Ω–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤

---

### –¢–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å #5: "–î–∞–π —É—Ä–æ–≤–Ω–∏ –ø–æ ARB –Ω–∞ –¥–Ω–µ–≤–∫–µ"
**–ë—ã–ª–æ** (9/10):
- ‚úÖ –£—Ä–æ–≤–Ω–∏ –≤–µ—Ä–Ω—ã–µ
- ‚úÖ –°—Ç–∏–ª—å –ø—Ä—è–º–æ–π
- ‚ùå –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç: "–ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —ç—Ç–∏–º–∏ —É—Ä–æ–≤–Ω—è–º–∏?"

**–°—Ç–∞–ª–æ** (–æ–∂–∏–¥–∞–µ—Ç—Å—è 9-10/10):
- ‚úÖ –£—Ä–æ–≤–Ω–∏: $0.234 / $0.209 / $0.27 / $0.32
- ‚úÖ TA: RSI, MACD, ATR, EMA
- ‚úÖ **–ß–¢–û –î–ï–õ–ê–¢–¨**:
  - "ARB –≤–æ–∑–ª–µ ATL ‚Äî –∑–æ–Ω–∞ —Ä–∏—Å–∫–∞. –¢—Ä–µ–π–¥ –¥–ª—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö"
  - "–°—Ç–∞–Ω–¥–∞—Ä—Ç: –∂–¥–∏ –∑–∞–∫—Ä–µ–ø –≤—ã—à–µ $0.27, –ø–æ—Ç–æ–º –≤—Ö–æ–¥"
  - "–°—Ç–æ–ø: $0.209. –¶–µ–ª—å: $0.32"

---

## üìä –ò—Ç–æ–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –ü—Ä–æ–±–ª–µ–º–∞ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|----------|------|-------|
| **–ù–µ—Ç –ø—Ä—è–º—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤** | "–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è" | ‚úÖ "long/short/wait + —É—Å–ª–æ–≤–∏—è" |
| **–°–ª–∞–±—ã–π bias** | —Ä–∞–∑–º—ã—Ç | ‚úÖ —á—ë—Ç–∫–∏–π bias –≤ –≤—ã–≤–æ–¥–µ |
| **–ù–µ—Ç –ø—É—Ç–µ–π –∫ —Ü–µ–ª—è–º** | –ø—Ä–æ—Å—Ç–æ "–º–µ—á—Ç—ã" | ‚úÖ $A ‚Üí $B ‚Üí $C ‚Üí —Ü–µ–ª—å |
| **Scenario_levels –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç** | —Ç–æ–ª—å–∫–æ –¥–ª—è "–ª–æ–Ω–≥/—à–æ—Ä—Ç" | ‚úÖ —Ç–∞–∫–∂–µ –¥–ª—è "–¥–µ—Ä–∂–∞—Ç—å/—Ñ–∏–∫—Å–∏—Ç—å" |
| **–ü–µ—Ä–µ—É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤** | RSI/MACD/EMA –¥–ª—è –≤—Å–µ—Ö | ‚úÖ –ø—Ä–æ—Å—Ç–æ–π —è–∑—ã–∫ –¥–ª—è is_newbie_question |
| **–ù–µ—Ç "—á—Ç–æ –¥–µ–ª–∞—Ç—å"** | —Ç–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–∏ | ‚úÖ —É—Ä–æ–≤–Ω–∏ + —Å—Ç—Ä–∞—Ç–µ–≥–∏—è |

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞

–ó–∞–¥–∞–π –±–æ—Ç—É —Ç–µ—Å—Ç–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã:

1. **–¢—Ä–µ–π–¥–∏–Ω–≥**: "ETH —Å–µ–π—á–∞—Å –±—Ä–∞—Ç—å –≤ –ª–æ–Ω–≥ –∏–ª–∏ –ª—É—á—à–µ –ø–æ–¥–æ–∂–¥–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å?"
2. **–¶–µ–ª—å**: "–°–æ–ª–∞–Ω–∞ —Ä–µ–∞–ª—å–Ω–æ –º–æ–∂–µ—Ç –¥–æ–π—Ç–∏ –¥–æ $300 –∏–ª–∏ —ç—Ç–æ –º–µ—á—Ç—ã?"
3. **–ü—Ä–æ—Å–∞–¥–∫–∞**: "–ë—Ä–æ, —è –ø–æ BTC –≤ –º–∏–Ω—É—Å–µ -15%, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –¥–µ—Ä–∂–∞—Ç—å?"
4. **–ù–æ–≤–∏—á–æ–∫**: "–ê —á—Ç–æ –∑–Ω–∞—á–∏—Ç —É—Ä–æ–≤–µ–Ω—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏? –≠—Ç–æ –≥–¥–µ –ø–æ–∫—É–ø–∞—Ç—å –∏–ª–∏ –ø—Ä–æ–¥–∞–≤–∞—Ç—å?"
5. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π**: "–î–∞–π –∫–ª—é—á–µ–≤—ã–µ —É—Ä–æ–≤–Ω–∏ –ø–æ ARB –Ω–∞ –¥–Ω–µ–≤–∫–µ: –ø–æ–¥–¥–µ—Ä–∂–∫–∞, —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ, EMA, ATR"

### –ú–µ—Ç–æ–¥ 2: –ü—Ä—è–º–æ –≤ –∫–æ–¥–µ

```python
from src.services.openai_service_two_step import two_step_service
from sqlalchemy.ext.asyncio import AsyncSession

async def test_prompts():
    # –ü—Ä–∏–º–µ—Ä: —Ç—Ä–µ–π–¥–∏–Ω–≥ –≤–æ–ø—Ä–æ—Å
    response = two_step_service.stream_two_step_completion(
        session=session,
        user_id=1,
        user_message="ETH –±—Ä–∞—Ç—å –≤ –ª–æ–Ω–≥ –∏–ª–∏ –ø–æ–¥–æ–∂–¥–∞—Ç—å?",
        user_language="ru"
    )

    async for chunk in response:
        print(chunk, end="")
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ –æ—Ç–≤–µ—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç:

### –î–ª—è trading questions:
- [ ] –ß—ë—Ç–∫–∏–π bias (long/short/wait)
- [ ] –£—Å–ª–æ–≤–∏—è –¥–ª—è –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
- [ ] –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ ($X, $Y)
- [ ] –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Ü–µ (–Ω–µ —Ä–∞–∑–º–∞–∑–∞–Ω–Ω—ã–π)
- [ ] –°—Ü–µ–Ω–∞—Ä–∏–∏ (–±—ã—á–∏–π/–º–µ–¥–≤–µ–∂–∏–π) —Å entry/SL/TP

### –î–ª—è "–ø—É—Ç—å –∫ —Ü–µ–ª–∏":
- [ ] –£—Ä–æ–≤–Ω–∏ –ø—Ä–æ–±–∏—Ç–∏—è: $A ‚Üí $B ‚Üí $C ‚Üí —Ü–µ–ª—å
- [ ] –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å (–ø—Ä–∏–º–µ—Ä–Ω–∞—è)
- [ ] –£—Å–ª–æ–≤–∏—è: "–µ—Å–ª–∏ –ø—Ä–æ–±—å—ë—Ç X –∏ —É–¥–µ—Ä–∂–∏—Ç Y"

### –î–ª—è –ø—Ä–æ—Å–∞–¥–æ–∫:
- [ ] SAFEGUARD –∞–∫—Ç–∏–≤–µ–Ω (–Ω–µ—Ç —Å–∞—Ä–∫–∞–∑–º–∞)
- [ ] –î–≤–∞ –ø—É—Ç–∏: –¥–µ—Ä–∂–∞—Ç—å + —Ñ–∏–∫—Å–∏—Ç—å
- [ ] –£—Å–ª–æ–≤–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É—Ç–∏
- [ ] –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### –î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤:
- [ ] –ü—Ä–æ—Å—Ç–æ–π —è–∑—ã–∫
- [ ] –ù–µ—Ç –∑–∞—É–º–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤
- [ ] –ü—Ä–∏–º–µ—Ä —Å —Ü–µ–Ω–∞–º–∏
- [ ] –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–î–∏—Å–∫–ª–µ–π–º–µ—Ä** —Ç–µ–ø–µ—Ä—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Å—Ç–∏–ª—å Syntra:
   - –í–º–µ—Å—Ç–æ –∂—ë—Å—Ç–∫–æ–≥–æ "–ù–ï –≥–æ–≤–æ—Ä—é –ø–æ–∫—É–ø–∞–π/–ø—Ä–æ–¥–∞–≤–∞–π"
   - –î–∞—ë–º —Å—Ü–µ–Ω–∞—Ä–∏–∏ + "–≠—Ç–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, —Ä–µ—à–µ–Ω–∏–µ –∑–∞ —Ç–æ–±–æ–π" + ‚ö° NFA

2. **Bias** (long/short/wait) ‚Äî —ç—Ç–æ **–ù–ï** —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
   - –≠—Ç–æ **–æ—Ü–µ–Ω–∫–∞ —Å–∏—Ç—É–∞—Ü–∏–∏** —Å —É—Å–ª–æ–≤–∏—è–º–∏
   - –ù–∞–ø—Ä–∏–º–µ—Ä: "long –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, –ï–°–õ–ò –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è A, B, C"

3. **–°—Ü–µ–Ω–∞—Ä–∏–∏** ‚Äî —ç—Ç–æ **framework –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π**:
   - –ù–ï "–∫—É–ø–∏ –∑–¥–µ—Å—å"
   - –î–ê "–µ—Å–ª–∏ —Ö–æ—á–µ—à—å –ª–æ–Ω–≥ ‚Äî –≤–æ—Ç —É—Å–ª–æ–≤–∏—è, entry, SL, TP"

---

## üöÄ Deployment

–ò–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –≤ –∫–æ–¥–µ:
- [config/prompts.py](config/prompts.py#L36-L41)
- [src/services/openai_service_two_step.py](src/services/openai_service_two_step.py#L344-L482)

**–¢—Ä–µ–±—É–µ—Ç—Å—è**:
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å 5 —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ bias —Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ—Ç—Å—è —á—ë—Ç–∫–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–æ–≤–∏—á–∫–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—É—á–∞—é—Ç –ø—Ä–æ—Å—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ SAFEGUARD —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –ø—Ä–æ—Å–∞–¥–∫–∞—Ö

**–ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è**:
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î
- –ú–∏–≥—Ä–∞—Ü–∏–∏
- –†–µ—Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–∏—Å–æ–≤ (–∫—Ä–æ–º–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –±–æ—Ç–∞)

---

**–ê–≤—Ç–æ—Ä**: Claude Code
**–î–∞—Ç–∞**: 2025-11-19
**–í–µ—Ä—Å–∏—è**: Syntra Prompts v2.0
